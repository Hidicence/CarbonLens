# CarbonLens 數據同步測試指南

## 🎯 測試目標
驗證APP和Web之間的數據同步功能是否正常工作

## 📋 測試步驟

### 1. 準備工作
- ✅ 後端服務運行在: http://localhost:3001
- ✅ Web前端運行在: http://localhost:3000  
- ✅ APP已安裝並連接到同一網絡

### 2. Web端測試 (http://localhost:3000)

#### 2.1 創建測試專案
1. 打開瀏覽器訪問 http://localhost:3000
2. 點擊「新建專案」
3. 填寫專案資訊：
   - 專案名稱：「測試同步專案」
   - 描述：「用於測試數據同步」
   - 狀態：「進行中」
   - 開始日期：今天
4. 保存專案

#### 2.2 添加專案排放記錄
1. 進入剛創建的專案
2. 點擊「新增排放記錄」
3. 填寫記錄：
   - 描述：「Web端測試記錄」
   - 類別：「交通運輸」
   - 階段：「製作期」
   - 排放量：100 kg CO2e
   - 日期：今天
4. 保存記錄

#### 2.3 添加營運排放記錄
1. 回到主頁面
2. 點擊「營運排放」
3. 點擊「新增記錄」
4. 填寫記錄：
   - 描述：「Web端營運記錄」
   - 類別：「電力」
   - 排放量：50 kg CO2e
   - 日期：今天
5. 保存記錄

### 3. APP端測試

#### 3.1 同步數據到APP
1. 打開CarbonLens APP
2. 確保網絡連接正常
3. 查看同步狀態指示器
4. 手動觸發同步（如果需要）
5. 驗證Web端創建的數據是否出現在APP中

#### 3.2 在APP中創建新數據
1. 在APP中創建新專案：
   - 名稱：「APP測試專案」
   - 描述：「從APP創建的測試專案」
2. 添加專案排放記錄：
   - 描述：「APP端測試記錄」
   - 類別：「住宿」
   - 階段：「前期製作」
   - 排放量：75 kg CO2e
3. 添加營運排放記錄：
   - 描述：「APP端營運記錄」
   - 類別：「餐飲」
   - 排放量：30 kg CO2e

#### 3.3 驗證APP到Web的同步
1. 等待自動同步（15分鐘）或手動觸發同步
2. 回到Web界面 (http://localhost:3000)
3. 刷新頁面
4. 驗證APP中創建的數據是否出現在Web中

### 4. 同步衝突測試

#### 4.1 創建衝突場景
1. 同時在Web和APP中編輯同一個專案
2. 修改不同的欄位
3. 觸發同步
4. 觀察衝突解決機制

#### 4.2 離線測試
1. 斷開APP的網絡連接
2. 在APP中創建多筆記錄
3. 重新連接網絡
4. 觀察離線數據的同步過程

## 🔍 驗證要點

### 數據一致性檢查
- [ ] 專案列表在兩端是否一致
- [ ] 專案詳細資訊是否同步
- [ ] 排放記錄數量和內容是否匹配
- [ ] 營運記錄是否正確同步
- [ ] 統計數據是否準確

### 同步狀態監控
- [ ] 同步狀態指示器是否正常顯示
- [ ] 同步進度條是否工作
- [ ] 錯誤狀態是否正確顯示
- [ ] 最後同步時間是否更新

### 性能測試
- [ ] 大量數據同步的性能
- [ ] 網絡中斷恢復後的同步
- [ ] 同步過程中的APP響應性

## 🐛 常見問題排除

### 同步失敗
1. 檢查網絡連接
2. 確認API服務器運行狀態
3. 查看APP日誌中的錯誤信息
4. 檢查認證token是否有效

### 數據不一致
1. 手動觸發完整同步
2. 檢查衝突解決策略設置
3. 清除本地緩存重新同步

### 性能問題
1. 調整同步間隔時間
2. 檢查數據庫查詢性能
3. 優化網絡請求頻率

## 📊 測試結果記錄

| 測試項目 | 狀態 | 備註 |
|---------|------|------|
| Web -> APP 專案同步 | ⏳ 待測試 | |
| Web -> APP 排放記錄同步 | ⏳ 待測試 | |
| APP -> Web 專案同步 | ⏳ 待測試 | |
| APP -> Web 排放記錄同步 | ⏳ 待測試 | |
| 營運記錄雙向同步 | ⏳ 待測試 | |
| 衝突解決機制 | ⏳ 待測試 | |
| 離線同步 | ⏳ 待測試 | |

## 🎉 成功標準
- 所有數據在兩端保持一致
- 同步過程無錯誤
- 用戶體驗流暢
- 衝突解決合理
- 離線功能正常 